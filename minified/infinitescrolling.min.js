var tumblrAutoPager={url:"http://proto.jp/",ver:"0.1.7",rF:!0,gP:{},pp:null,ppId:"",LN:location.hostname,init:function(){function l(a){for(var d=[],b=0,c=a.childNodes.length;b<c;b++)d.push(a.childNodes.item(b));return d}function n(){var a,d=navigator.userAgent;this.bw={safari:124<=((a=d.split("AppleWebKit/")[1])?a.split("(")[0].split(".")[0]:0),konqueror:3.3<=((a=d.split("Konqueror/")[1])?a.split(";")[0]:0),mozes:20011128<=((a=d.split("Gecko/")[1])?a.split(" ")[0]:0),opera:!!window.opera&&"function"==
typeof XMLHttpRequest,msie:window.ActiveXObject?!!r():!1};return this.bw.safari||this.bw.konqueror||this.bw.mozes||this.bw.opera||this.bw.msie}function r(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(d){return null}}else return null}function t(a,d,b,c,f,h,k,l){var p="GET"==b.toUpperCase(),g=r();if(null==g)return null;h&&h&&(c+=(-1==c.indexOf("?")?"?":"&")+
"t="+(new Date).getTime());var q=new n,m=q.bw.opera;h=q.bw.safari;q=q.bw.mozes;if("object"==typeof a){var s=a.onload;a=a.onbeforsetheader}else s=a,a=null;m||h||q?g.onload=function(){s(g);g.abort()}:g.onreadystatechange=function(){4==g.readyState&&(s(g),g.abort())};d=function(a,d){var b=[];if("object"==typeof a)for(var c in a){var e=a[c];b.push(encodeURIComponent(c)+"="+encodeURIComponent(e))}else if("string"==typeof a){if(""==a)return"";"&"==a.charAt(0)&&(a=a.substring(1,a.length));e=a.split("&");
for(c=0;c<e.length;c++){var g=e[c].split("="),h=g[1];b.push(encodeURIComponent(g[0])+"="+encodeURIComponent(h))}}return b.join("&")}(d,c);p&&(c+=(-1==c.indexOf("?")?"?":""==d?"":"&")+d);g.open(b,c,f,k,l);a&&a(g);(function(a){m&&"function"!=typeof a.setRequestHeader||a.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");return a})(g);g.send(d);return g}function u(a){if(404==a.status)b.remainFlg=!1;else{var d=document.createElement("div");d.innerHTML=a.responseText;a=
b.gP(d.getElementsByTagName("*"));if(2>a.length)b.rF=!1;else{for(d=0;d<a.length;d++)b.pp.appendChild(a[d]),msnry.appended(a[d]),imagesLoaded(container,function(){msnry.layout()});(a=document.getElementById("footer"))?a.parentNode.appendChild(a):null;b.rF=!0}}}function v(){var a="BackCompat"==document.compatMode?document.body:document.documentElement;a.scrollHeight-a.clientHeight-(a.scrollTop||document.body.scrollTop)<2*a.clientHeight&&b.rF&&(b.rF=!1,p++,addNextPageWithLikes=function(a){u(a);Tumblr.LikeButton.get_status_by_page(p)},
t(addNextPageWithLikes,"","GET","http://"+b.LN+"/page/"+p,!0));setTimeout(arguments.callee,200)}if(!document.getElementById("autopagerize_icon")&&-1==navigator.userAgent.indexOf("iPhone")){var b=tumblrAutoPager,p=1,f=location.href,k=f.lastIndexOf("/page/"),m=f.lastIndexOf("/tagged/");if(-1!=k)p=parseInt(f.slice(k+6)),b.LN=f.slice(7,k);else if(-1!=m)b.LN=f.slice(7),"/"==b.LN.slice(b.LN.length-1)&&(b.LN=b.LN.slice(0,b.LN.length-1));else if("http://"+b.LN+"/"!=f)return;f=[function(a){for(var b=[],e=
0,c=a.length;e<c;e++)if("autopagerize_page_element"==a[e].className){b=l(a[e]);break}return b},function(a){for(var b=[],e=0,c=a.length;e<c;e++){var f=a[e].className?a[e].className.split(" "):null;if(f)for(var h=0;h<f.length;h++)"post"==f[h]?b.push(a[e]):null}return b},function(a){for(var d=[],e=b.ppId?[b.ppId]:"posts main container content apDiv2 wrapper projects".split(" "),c=0,f=a.length;c<f;c++)for(var h=0;h<e.length;h++)if(a[c].id==e[h]){d=l(a[c]);b.ppId=a[c].id;break}return d}];for(k=0;k<f.length;k++)if(m=
f[k](document.body.getElementsByTagName("*")),m.length){b.gP=f[k];b.pp=m[0].parentNode;break}b.pp&&(t.README={license:"Public Domain",url:"http://jsgt.org/lib/ajax/ref.htm",version:0.516,author:"Toshiro Takahashi"},v())}},switchAutoPage:function(){this.rF=!this.rF;for(var l=document.getElementsByTagName("*"),n=0,r=l.length;n<r;n++)"tAP_switch"==l[n].className&&(l[n].firstChild.nodeValue=this.rF?"AutoPage[OFF]":"AutoPage[ON]")}};
window.addEventListener?window.addEventListener("load",tumblrAutoPager.init,!1):window.attachEvent?window.attachEvent("onload",tumblrAutoPager.init):window.onload=tumblrAutoPager.init;